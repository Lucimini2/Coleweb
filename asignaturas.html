<!doctype html>
<!-- Página ELIGE LA ASIGNATURA: carga subjects.json y muestra tarjetas -->
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Asignaturas</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-slate-100">
  <div class="max-w-6xl mx-auto p-6">
    <h2 class="text-xl font-semibold mb-2 text-center">ELIGE LA ASIGNATURA</h2>
    <p class="text-slate-400 mb-4 text-center">Elige tu asignatura y lánzate: aprende, practica y ¡aprueba!</p>
    <div id="subjects" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"></div>
  </div>
  <script>
    const gridEl = document.getElementById('subjects');
    let data = {};

    function renderSubjectsAsCards() {
      gridEl.innerHTML = '';
      Object.keys(data).forEach(name => {
        const a = document.createElement('a');
        a.className = 'block bg-slate-800 border border-slate-700 rounded-xl p-4 transition duration-150 hover:-translate-y-1 hover:border-indigo-400 hover:bg-slate-700';
        a.href = 'subject.html?subject=' + encodeURIComponent(name);
        const h2 = document.createElement('h2');
        h2.className = 'text-lg mb-2';
        h2.textContent = name;
        const span = document.createElement('span');
        span.className = 'text-sm text-slate-400';
        const count = (data[name] || []).length;
        span.textContent = count ? (count + ' recurso' + (count > 1 ? 's' : '')) : 'Sin recursos aún';
        a.appendChild(h2);
        a.appendChild(span);
        gridEl.appendChild(a);
      });
      const aMedia = document.createElement('a');
      aMedia.className = 'block bg-slate-800 border border-teal-600 rounded-xl p-4 transition duration-150 hover:-translate-y-1 hover:border-teal-400 hover:bg-slate-700';
      aMedia.href = 'calcular_media.html';
      const h2m = document.createElement('h2');
      h2m.className = 'text-lg mb-2 text-teal-300';
      h2m.textContent = 'Calcular Media';
      const spanm = document.createElement('span');
      spanm.className = 'text-sm text-slate-400';
      spanm.textContent = 'Calcula la media de tus calificaciones.';
      aMedia.appendChild(h2m);
      aMedia.appendChild(spanm);
      gridEl.appendChild(aMedia);
    }

    async function init() {
      try {
        const res = await fetch('subjects.json');
        data = await res.json();
      } catch (e) {
        data = {
          'Mates': [
            { title: 'Tablas de multiplicar', description: 'Del 1 al 10 con respuestas múltiples', href: 'tablas.html' }
          ],
          'Lengua': [],
          'Inglés': [],
          'Francés': [],
          'Biologia': [],
          'Historia': []
        };
      }
      renderSubjectsAsCards();
    }
    init();
  </script>
</body>
</html>
