<!doctype html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>COLEWEB</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preload" href="tablas.html" as="document">
</head>
<body class="bg-slate-900 text-slate-100">
  <div class="max-w-6xl mx-auto p-6">
    <div class="flex flex-col gap-4 mb-2">
      <div class="text-center">
        <div class="text-sm tracking-wide text-slate-400">ESTUDIA Y APRUEBA</div>
        <h1 class="text-5xl sm:text-6xl font-extrabold">COLEWEB</h1>
      </div>
      <div class="bg-slate-800 ring-1 ring-slate-700 rounded-3xl overflow-hidden h-[64vh] sm:h-[66vh]">
        <img id="hero" src="assets/hero.gif" alt="Estudia y aprueba" class="w-full h-full object-cover">
      </div>
      <div class="text-center mt-3">
        <a href="asignaturas.html" class="inline-block bg-slate-100 text-slate-900 rounded-full px-7 py-3 text-base shadow">A Estudiar!!</a>
      </div>
    </div>
    
  </div>
    <script>
    // Fallback de imagen del hero: intenta .gif, luego .png y finalmente un SVG embebido
    (function(){
      const hero = document.getElementById('hero');
      if (!hero) return;
      const svg = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 400"><defs><linearGradient id="g" x1="0" x2="0" y1="0" y2="1"><stop offset="0" stop-color="#0f172a"/><stop offset="1" stop-color="#1f2937"/></linearGradient></defs><rect width="100%" height="100%" fill="url(#g)"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-family="system-ui, sans-serif" font-size="42" fill="#cbd5e1">Imagen no encontrada</text></svg>';
      const fallbackSvg = 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(svg);
      hero.addEventListener('error', function tryPng(){
        hero.removeEventListener('error', tryPng);
        hero.src = 'assets/hero.png';
        hero.onerror = function(){ hero.src = fallbackSvg; };
      });
    })();
    const gridEl = document.getElementById('subjects');
    let data = {};

    function renderSubjectsAsCards() {
      gridEl.innerHTML = '';
      Object.keys(data).forEach(name => {
        const a = document.createElement('a');
        a.className = 'block bg-slate-800 border border-slate-700 rounded-xl p-4 transition duration-150 hover:-translate-y-1 hover:border-indigo-400 hover:bg-slate-700';
        a.href = 'subject.html?subject=' + encodeURIComponent(name);
        const h2 = document.createElement('h2');
        h2.className = 'text-lg mb-2';
        h2.textContent = name;
        const span = document.createElement('span');
        span.className = 'text-sm text-slate-400';
        const count = (data[name] || []).length;
        span.textContent = count ? (count + ' recurso' + (count > 1 ? 's' : '')) : 'Sin recursos aún';
        a.appendChild(h2);
        a.appendChild(span);
        gridEl.appendChild(a);
      });
    }

    async function init() {
      try {
        const res = await fetch('subjects.json');
        data = await res.json();
      } catch (e) {
        data = {
          'Mates': [
            { title: 'Tablas de multiplicar', description: 'Del 1 al 10 con respuestas múltiples', href: 'tablas.html' }
          ],
          'Lengua': [],
          'Inglés': [],
          'Francés': [],
          'Biologia': [],
          'Historia': []
        };
      }
      renderSubjectsAsCards();
    }
    init();
  </script>
</body>
</html>